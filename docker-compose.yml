services:
  orchestrator-service:
    build:
      context: .
      dockerfile: apps/orchestrator-service/Dockerfile
    ports:
      - '3000:3000'
    environment:
      FIXER_HOST: fixer-service
      FIXER_PORT: 3001
      EXCHANGERATE_HOST: exchangerate-service
      EXCHANGERATE_PORT: 3002
      FLOATRATES_HOST: floatrates-service
      FLOATRATES_PORT: 3003
    depends_on:
      - fixer-service
      - exchangerate-service
      - floatrates-service

  fixer-service:
    build:
      context: .
      dockerfile: apps/fixer-service/Dockerfile
    env_file:
      - .env
    ports:
      - '3001:3001' # TCP microservice
      - '3011:3011' # HTTP para pruebas (Postman)

  exchangerate-service:
    build:
      context: .
      dockerfile: apps/exchangerate-service/Dockerfile
    env_file:
      - .env
    ports:
      - '3002:3002' # TCP microservice
      - '3012:3012' # HTTP para pruebas (Postman)

  floatrates-service:
    build:
      context: .
      dockerfile: apps/floatrates-service/Dockerfile
    env_file:
      - .env
    ports:
      - '3003:3003' # TCP microservice
      - '3013:3013' # HTTP para pruebas (Postman)
